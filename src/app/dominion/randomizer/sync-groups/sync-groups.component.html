<div class="bodyWithMargin">

  <div id="addGroup">
    <!--<form #newGroupForm="ngForm" (ngSubmit)="addSyncGroup( newGroupForm )">
      <md-input-container>
        <input mdInput name="newGroupName" ngModel  placeholder="new group name" required>
      </md-input-container>
      <md-input-container>
        <input mdInput name="newGroupPassword" ngModel  placeholder="password" required>
      </md-input-container>

      <md-select placeholder="your name" required name="myName"
          id="myNameSelect" [(ngModel)]="myName" #myNameSelect="ngModel">
        <md-option *ngFor="let player of PlayersNameList" [value]="player.name">
          {{ player.name }}
        </md-option>
      </md-select>

      <button type="submit" md-raised-button color="primary"
          [disabled]="!newGroupForm.form.valid">
        <md-icon>group_add</md-icon>
      </button>

    </form>-->

    <md-input-container>
      <input mdInput [(ngModel)]="newGroupName" placeholder="new group name" required>
    </md-input-container>
    <md-input-container>
      <input mdInput [(ngModel)]="newGroupPassword" placeholder="password" required>
    </md-input-container>

    <md-select placeholder="your name" required [(ngModel)]="myName" id="myNameSelect">
      <md-option *ngFor="let player of PlayersNameList" [value]="player.name">
        {{ player.name }}
      </md-option>
    </md-select>

    <button md-raised-button color="primary"
          (click)="addSyncGroup()"
          [disabled]="newGroupName === '' || newGroupPassword === '' ">
      <md-icon>group_add</md-icon>
    </button>
  </div>


  <hr>


  <div *ngFor="let group of syncGroups; let idx = index">
    <md-card class="groupListItem" (click)="groupClicked(idx)">

      <md-card-header>
        <md-icon md-card-avatar>group</md-icon>
        <md-card-title> {{group.data.name}} </md-card-title>
        <md-card-subtitle>
          {{getUserNamesInGroup( group.id ).join(", ")}}<br>
          {{utils.toYMDHMS(group.data.getDate())}}
        </md-card-subtitle>
      </md-card-header>


      <md-card-content *ngIf="group.selected">
        <md-input-container [color]="(signInPasswordIsValid( group.id ) ? 'primary' : 'warn')" >
          <input mdInput placeholder="password" required
              name="signInPassword" [(ngModel)]="signInPassword" >
          <md-hint *ngIf="!signInPasswordIsValid( group.id )" class="alert">
            Password does not match
          </md-hint>
        </md-input-container>

        <md-select placeholder="your name" required
              name="myName" [(ngModel)]="myName">
          <md-option *ngFor="let player of PlayersNameList" [value]="player.name">
            {{ player.name }}
          </md-option>
        </md-select>
      </md-card-content>

      <md-card-actions *ngIf="group.selected">
        <button md-raised-button color="primary"
              (click)="signIn(group.id)"
              [disabled]="signInPassword === '' || !myName ">
          Sign in
        </button>
        <button md-raised-button color="warn"   
              (click)="signOut(group.id)"
              [disabled]="signInPassword === '' || !myName ">
          Sign out
        </button>
      </md-card-actions>
      
    </md-card>
  </div>

</div>
